# DragAndDrop
Тестовое задание на реализацию механики Drag-and-Drop
Технические моменты реализации
Этот проект представляет собой реализацию механики Drag-and-Drop в Unity с дополнительными функциями, такими как гравитация, взаимодействие с полками, скроллинг камеры.
1. Механика Drag-and-Drop:
Для реализации перетаскивания объектов использовались события OnMouseDown и OnMouseUp.
Во время перетаскивания позиция объекта обновляется в соответствии с позицией мыши.
Использовался компонент Rigidbody2D с установленным isKinematic = true во время перетаскивания, чтобы отключить физику и обеспечить плавное перемещение объекта. При отпускании объекта isKinematic устанавливается в false, чтобы включить физику.
Для сброса скорости падения объекта при захвате использовалась установка rb.velocity = Vector2.zero; в момент нажатия на объект.
2. Гравитация:
Гравитация реализована с помощью компонента Rigidbody2D.
Изначально возникала проблема с вращением объектов при падении. Эта проблема была решена путем установки Freeze Rotation на оси Z в компоненте Rigidbody2D.
3. Взаимодействие с полками:
Для определения столкновений с полками использовались события OnCollisionEnter2D и OnCollisionExit2D.
Изначально все полки находились на одной глубине (Z-координате). Для создания иллюзии глубины было принято решение изменять размер утки при прикосновении к полке. Это позволяло визуально определить, на какой полке находится объект. Была также проблема с тем, что при прикосновнии к полке предмет сначала уменьшался, а потом мгновенно увеличивался. Для решения этой проблемы была добавлена задержка при прикосновении к полке.
4. Скроллинг камеры (панорамное движение):
Изначально для скроллинга камеры использовались кнопки, но позже, так как проект создан для мобильных устройств было решено реализовать скроллинг с помощью зажатия и перетаскивания фона.
Скроллинг реализован путем отслеживания смещения мыши/касания при зажатой кнопке/касании и перемещения камеры в противоположном направлении.
Добавлены границы (leftLimit, rightLimit, topLimit, bottomLimit) для ограничения движения камеры (Верхнии и Нижнии границы добавлены, для того чтобы в будущем можно было реализовать перемещение по осу Y).
Реализована инерция для более плавного и естественного движения камеры после отпускания зажатия.
Изначально инерция была реализована с помощью сохранения скорости и постепенного ее уменьшения. Однако этот метод не работал в принципе.
В итоге инерция была реализована с помощью таймера и измерения расстояния и времени, пройденного во время перетаскивания. Это позволило более точно контролировать скорость и замедление камеры.
Для предотвращения перемещения камеры при перетаскивании объекта была добавлена проверка на наличие объекта с определенным тэгом под курсором в момент начала перетаскивания.
5. Звуковые эффекты:
При поднятии объекта проигрывается короткий звуковой эффект.
Для проигрывания звука использовался компонент AudioSource и метод PlayOneShot.
Проблемы и решения:

Проблема: Вращение объектов при падении.
Решение: Зафиксирована ось Z в настройках Rigidbody2D.
Проблема: Накопление скорости падения при многократном перетаскивании и отпускании объекта.
Решение: Сброс скорости объекта при каждом захвате.
Проблема: Неработающая инерция при скроллинге камеры.
Решение: Переход к более сложному методу расчета инерции с использованием таймера и измерения расстояния и времени.
Проблема: Перемещение камеры при попытке перетащить объект.
Решение: Добавлена проверка на наличие объекта с тэгом “Draggable” под курсором в момент начала перетаскивания.
